<!--
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Store</title>

  <style>
    #products-container {
     /* display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));*/
      display:flex ;
      flex-wrap:wrap ;
      justify-content:center ;
      gap: 0.5rem;
   /* padding: 0.25rem;*/
    }
    .product {
      border: 1px solid #ddd;
      padding: 0.25rem;
      text-align: center;
      width:9rem ;
    }
    .product img {
      width: 100%;
      height: auto;
    }
    button {
      border: none;
      padding: 0.5rem 1rem;
      background: black;
      color: white;
      border-radius: 0.5rem;
      cursor: pointer;
    }
    button:hover {
      background: #333;
      box-shadow:0 0 1rem#000000 ;
    }
  </style>
</head>
<body>
  <nav id="nav">
  <nav>
  <button id="menubtn">‚ò∞</button>
  <ul id="menu">
    <li><a href="index.html">Home</a></li>
   <li><a href="store.html?category=dressing room">Dressing room </a></li>
   <li><a href="store.html?category=bedroom">Bedroom</a></li>
   <li><a href="store.html?category=kitchen">Kitchen</a></li>
   <li><a href="store.html?category=livingroom">LivingRoom</a></li>
   <li><a href="store.html?category=dining">Dining room </a></li>
  </ul>
</nav>

<style>
nav{
      display: flex ;
      position:relative ;
      z-index:2 ;
      margin:1rem ;
      align-items :center ;
      justify-content:space-between ;
    }
    nav img{
      object-fit: contain ;
      height:100%;
      border-radius:3rem ;
    }
    nav div img{
      margin:0.25rem  ;
      width:2rem;
      cursor:pointer;
    }
    h2{
      font-family: "Cormorant", serif;
      font-weight: 700;
      margin:1rem;
    }

nav{
    display: flex ;
    position:sticky ;
    top: 0;
    width:90%;
    z-index:2 ;
    
    align-items :center ;
    justify-content:space-between ;
    background: #FFFFFF ;
}
nav div{
    display:flex ;
}
nav img{
    object-fit: contain ;
    width :3rem ;
    border-radius:3rem ;
}
nav img:hover{
    transform: scale(1.1);
    transition: 0.3s ;
    
}
*{
  margin:0;
  padding: 0;
}
nav div img{
    margin:0.25rem  ;
}
#searchbox {
  display: none;
  padding: 0.5rem;
  border: 1px solid #ccc;
  border-radius: 5px;
}
#searchbox input{
  background:#FFFFFF ;
  color:#000000 ;
}
nav div{
  background:#FFFFFF ;
  color:#FFFFFF ;
}


  #menubtn {
    /*position: fixed;
    top: 1rem;
    left: 1rem;*/
    z-index: 1000;
    font-size: 1.5rem;
    
    
    border: none;
   padding: 0.5rem 1rem;
    border-radius: 0.5rem;
    cursor: pointer;
  }

  #menu {
   position: fixed;
    top: 6rem ;
    left: 3rem ;
    display: none;
    background: rgba(0,0,0,0.8);
    color: white;
    padding: 1rem;
    border-radius: 0.5rem;
    z-index: 999;
  }

  #menu li {
    list-style: none;
    margin: 0.5rem 0;
  }

  #menu li a {
    color: white;
    text-decoration: none;
  }
  #menu li a:hover{
    background:#FFFFFF ;
    color: #000000 ;
    border-radius:1rem ;
    padding:0.5rem ;
    transition:0.3s ;
  }
</style>

<script>
  const menubtn = document.getElementById("menubtn");
  const menu = document.getElementById("menu");

  menubtn.addEventListener("click", () => {
    if(menu.style.display === "block") {
      menu.style.display = "none";
    } else {
      menu.style.display = "block";
    }
  });
</script>

  <h3>
Ready
  </h3>
  <div>
    <button id="searchBtn" onclick="toggleSearch()">
    <img src="search.webp" alt="">
    </button>
    <input type="text" placeholder="search" id="searchbox">
    
 
  <a href="Cart.html">
    <img src="shopping.webp" alt="Cart" class="cart"></a></div>
   
</nav>

  
  <h2 id="category-title">Store</h2>
  <div id="products-container"></div>

  <script>
    // ŸÇÿ±ÿßÿ°ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ LocalStorage
    const products = JSON.parse(localStorage.getItem("products")) || [];

    // ŸÇÿ±ÿßÿ°ÿ© category ŸÖŸÜ URL
    const params = new URLSearchParams(window.location.search);
    const category = params.get("category");

    // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπŸÜŸàÿßŸÜ
    document.getElementById("category-title").textContent =
      category ? category.charAt(0).toUpperCase() + category.slice(1) : "All Products";

    // ŸÅŸÑÿ™ÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿ≠ÿ≥ÿ® ÿßŸÑŸÉÿßÿ™Ÿäÿ¨Ÿàÿ±Ÿä
    const filtered = category
      ? products.filter(p => p.category && p.category.toLowerCase() === category.toLowerCase())
      : products;

    // ÿπÿ±ÿ∂ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™
    const container = document.getElementById("products-container");
    if (filtered.length > 0) {
      filtered.forEach((p, i) => {
        const div = document.createElement("div");
        div.classList.add("product");
        div.innerHTML = `
          <img src="${p.image}" alt="${p.title}">
          <h3>${p.title}</h3>
          <p>${p.description || ""}</p>
          <p>${p.price} EGP</p>
          <button onclick="addToCart(${i})">Add to Cart</button>
        `;
        container.appendChild(div);
      });
    } else {
      container.innerHTML = "<p>No products found.</p>";
    }

    // --- ÿßŸÑŸÉÿßÿ±ÿ™ ---
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    function addToCart(index) {
      const product = filtered[index];
      const found = cart.find(item => item.title === product.title);

      if (found) {
        found.qty += 1;
      } else {
        cart.push({ ...product, qty: 1 });
      }

      localStorage.setItem("cart", JSON.stringify(cart));
      alert(product.title + " added to cart!");
    }
  </script>
<section id="products-container">
  <!-- ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸáŸÜÿß Ÿáÿ™ÿ™ÿ≠ŸÖŸÑ ÿ®ÿßŸÑŸÄ JS ÿ≠ÿ≥ÿ® ÿßŸÑÿ®ÿßÿ±ÿßŸÖŸäÿ™ÿ± --><!--
</section>

<script>
const products = {
  bedroom: [
    { name: "King Bed", price: "$500", img: "Bedroom.jpg" },
    { name: "Wardrobe", price: "$300", img: "wardrobe.jpg" }
  ],
  dining: [
    { name: "Dining Table", price: "$700", img: "dining1.jpg" },
    { name: "Chair Set", price: "$200", img: "chair.jpg" }
  ]
};

const params = new URLSearchParams(window.location.search);
const category = params.get("category");

const container = document.getElementById("products-container");
container.innerHTML = ""; // ÿ™ŸÜÿ∏ŸäŸÅ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑŸÇÿØŸäŸÖ

if (category && products[category]) {
  products[category].forEach(p => {
    const div = document.createElement("div");
    div.classList.add("product");
    div.innerHTML = `
      <img src="${p.image}" alt="${p.name}">
      <h3>${p.name}</h3>
      <p>${p.price}</p>
      <button onclick="goToProduct('${category}','${p.name}')">View Product</button>
    `;
    container.appendChild(div);
  });
} else {
  container.innerHTML = "<p>No products found.</p>";
}

function goToProduct(category, productName) {
  window.location.href = `Product.html?category=${category}&product=${productName}`;
}

  

const menubtn = document.getElementById("menubtn");
const menu = document.getElementById("menu");
const searchBtn = document.getElementById("searchBtn");
const searchBox = document.getElementById("searchbox");
const productsContainer = document.getElementById("products-container");

// toggle menu
menubtn.addEventListener("click", (e) => {
  e.stopPropagation();
  menu.style.display = (menu.style.display === "block") ? "none" : "block";
});

// toggle search
searchBtn.addEventListener("click", (e) => {
  e.stopPropagation();
  if (searchBox.style.display === "block") {
    searchBox.style.display = "none";
  } else {
    searchBox.style.display = "block";
    searchBox.focus();
  }
});

// ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÑŸâ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑŸÖÿπÿ±Ÿàÿ∂ÿ©
searchBox.addEventListener("input", () => {
  const query = searchBox.value.toLowerCase();
  const items = productsContainer.querySelectorAll(".product");
  items.forEach(item => {
    const text = item.innerText.toLowerCase();
    if (text.includes(query)) {
      item.style.display = "block";
    } else {
      item.style.display = "none";
    }
  });
});

// ÿ•ÿ∫ŸÑÿßŸÇ ÿπŸÜÿØ ÿßŸÑÿ∂ÿ∫ÿ∑ ÿ®ÿ±ÿß
document.addEventListener("click", (e) => {
  if (!menu.contains(e.target) && e.target !== menubtn) {
    menu.style.display = "none";
  }
  if (!searchBox.contains(e.target) && e.target !== searchBtn && !searchBtn.contains(e.target)) {
    searchBox.style.display = "none";
  }
});
  
</script>
</body>
</html>-->






<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Store - Fixed</title>
  <style>
    :root{--bg:#fff;--muted:#666;--accent:#000}
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Inter, Arial, sans-serif;background:#f6f6f6;color:#111;padding:1rem}
    /* NAV */
    nav{display:flex;align-items:center;justify-content:space-between;gap:1rem;background:var(--bg);padding:.6rem 1rem;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,.05);position:sticky;top:0;z-index:50}
    .left{display:flex;align-items:center;gap:.75rem}
    #menubtn{background:#000;color:#fff;border:none;padding:.45rem .6rem;border-radius:6px;cursor:pointer;font-size:1rem}
    .logo{font-weight:700;font-family:'Cormorant', serif}
    .right{display:flex;align-items:center;gap:.5rem}
    #searchBtn{background:transparent;border:none;cursor:pointer;padding:.25rem}
    #searchBox{display:none;padding:.45rem .6rem;border:1px solid #ddd;border-radius:6px;min-width:180px}
    #cartBtn img{width:36px;height:36px;object-fit:cover;border-radius:6px}
    /* menu dropdown */
    #menu{position:fixed;left:1rem;top:4.6rem;display:none;background:rgba(0,0,0,.85);color:#fff;padding:1rem;border-radius:8px;z-index:60}
    #menu a{display:block;color:#fff;text-decoration:none;padding:.35rem .6rem;border-radius:6px}
    #menu a:hover{background:#fff;color:#000}
    /* products */
    main{max-width:1100px;margin:1.2rem auto}
    h2{margin:1rem 0;font-size:1.25rem}
    #products-container{display:flex;flex-wrap:wrap;gap:.6rem;justify-content:flex-start}
    .product{width:9.5rem;background:#fff;border-radius:8px;padding:.6rem;border:1px solid #eee;text-align:center;display:flex;flex-direction:column;gap:.4rem}
    .product img{width:100%;height:80px;object-fit:cover;border-radius:6px}
    .product h3{font-size:.95rem;margin:0;color:var(--accent)}
    .product p{font-size:.75rem;color:var(--muted);margin:0}
    .product .price{font-weight:700;color:#111}
    .addBtn{margin-top:.35rem;background:var(--accent);color:#fff;padding:.35rem .4rem;border-radius:6px;border:none;cursor:pointer}
    /* responsive */
    @media(min-width:700px){
      #products-container{gap:1rem}
    }
  </style>
</head>
<body>

<nav>
  <div class="left">
    <button id="menubtn" aria-label="menu">‚ò∞</button>
    <div class="logo">Ready</div>
  </div>

  <div class="right">
    <button id="searchBtn" aria-label="searchBtn">üîç</button>
    <input id="searchBox" type="text" placeholder="ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖŸÜÿ™ÿ¨ ÿ£Ÿà ŸÅÿ¶ÿ©..." aria-label="search">
    <a id="cartBtn" href="Cart.html" title="Cart"><img src="shopping.webp" alt="cart"></a>
  </div>
</nav>

 
<div id="menu" role="menu" aria-hidden="true">
  <a href="index.html">Home</a>
  <a href="store-fixed.html?category=bedroom">Bedroom</a>
  <a href="store-fixed.html?category=dining">Dining</a>
  <a href="store-fixed.html?category=kitchen">Kitchen</a>
  <a href="store-fixed.html?category=livingroom">LivingRoom</a>
    <a href="store-fixed.html?category=dressing room">dressing room</a>
</div>

<main>
  <h2 id="category-title">All Products</h2>
  <div id="products-container" aria-live="polite"></div>
</main>

<script>
/* ---------------------------
  1) ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ (ŸÖŸàÿ¨ŸàÿØÿ© ŸÖÿ≠ŸÑŸäÿßŸã ÿ£Ÿà ŸÖŸÜ localStorage)
  --------------------------- */
const defaultProducts = [
  {id:1,title:"King Bed",description:"Large comfortable bed",price:500, category:"bedroom", image:"Bedroom.jpg"},
  {id:2,title:"Wardrobe",description:"Wooden wardrobe",price:300, category:"bedroom", image:"wardrobe.jpg"},
  {id:3,title:"Dining Table",description:"Table for 6",price:700, category:"dining", image:"DiningTable.jpg"},
  {id:4,title:"Chair Set",description:"Set of 4 chairs",price:200, category:"dining", image:"chair.jpg"},
  {id:5,title:"Sofa",description:"Modern 3-seater",price:450, category:"livingroom", image:"Livingroom.jpg"},
  {id:6,title:"Kitchen Island",description:"Functional island",price:650, category:"kitchen", image:"Kitchen.jpg"}
];

// load from localStorage if exists, otherwise fallback
let products = JSON.parse(localStorage.getItem('products')) || defaultProducts;

/* ---------------------------
  2) ÿπŸÜÿßÿµÿ± ÿßŸÑÿµŸÅÿ≠ÿ©
  --------------------------- */
const menubtn = document.getElementById('menubtn');
const menu = document.getElementById('menu');
const searchBtn = document.getElementById('searchBtn');
const searchBox = document.getElementById('searchBox');
const productsContainer = document.getElementById('products-container');
const categoryTitle = document.getElementById('category-title');

/* ---------------------------
  3) ŸÅŸÑÿ™ÿ±ÿ© ÿ≠ÿ≥ÿ® category ŸÖŸÜ ÿßŸÑŸÄ URL (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)
  --------------------------- */
const params = new URLSearchParams(window.location.search);
const categoryParam = params.get('category');
let displayed = categoryParam
  ? products.filter(p => p.category && p.category.toLowerCase() === categoryParam.toLowerCase())
  : products;

categoryTitle.textContent = categoryParam ? categoryParam[0].toUpperCase() + categoryParam.slice(1) : 'All Products';

/* ---------------------------
  4) ÿ±ŸÜÿØÿ± ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ (ŸÖÿπ data attributes ŸÑŸÑÿ®ÿ≠ÿ´)
  --------------------------- */
function renderProducts(list){
  productsContainer.innerHTML = '';
  if(!list.length){
    productsContainer.innerHTML = '<p style="padding:1rem;color:#666">No products found.</p>';
    return;
  }
  
  function renderProducts(list){
  productsContainer.innerHTML = '';
  if(!list.length){
    productsContainer.innerHTML = '<p style="padding:1rem;color:#666">No products found.</p>';
    return;
  }
  list.forEach((p,i)=>{
    const div = document.createElement('div');
    div.className = 'product';
    div.dataset.title = p.title.toLowerCase();
    div.dataset.desc = (p.description || '').toLowerCase();
    div.dataset.category = (p.category || '').toLowerCase();
    div.dataset.price = String(p.price);
    div.innerHTML = `
      <img src="${p.image}" alt="${p.title}">
      <h3>${p.title}</h3>
      <p>${p.description || ''}</p>
      <div class="price">${p.price} EGP</div>
      <button class="addBtn" data-index="${i}">Add to Cart</button>
      <button onclick="window.location.href='product.html?id=${p.id}'">ÿπÿ±ÿ∂ ÿ™ŸÅÿßÿµŸäŸÑ</button>
    `;
    productsContainer.appendChild(div);
  });
}
  
  
  list.forEach((p,i)=>{
    const div = document.createElement('div');
    div.className = 'product';
    // data attributes ŸÑÿ™ÿ≥ŸáŸäŸÑ ÿßŸÑÿ®ÿ≠ÿ´
    div.dataset.title = p.title.toLowerCase();
    div.dataset.desc = (p.description || '').toLowerCase();
    div.dataset.category = (p.category || '').toLowerCase();
    div.dataset.price = String(p.price);
    div.innerHTML = `
      <img src="${p.image}" alt="${p.title}">
      <h3>${p.title}</h3>
      <p>${p.description || ''}</p>
      <div class="price">${p.price} EGP</div>
      <button class="addBtn" data-index="${i}">Add to Cart</button>
    `;
    productsContainer.appendChild(div);
  });
}
renderProducts(displayed);

/* ---------------------------
  5) menu toggle + stopPropagation so clicks inside don't close
  --------------------------- */
menubtn.addEventListener('click', function(e){
  e.stopPropagation();
  menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
  menu.setAttribute('aria-hidden', menu.style.display !== 'block');
  // if opening menu, hide search
  if(menu.style.display === 'block'){ searchBox.style.display = 'none'; }
});

/* ---------------------------
  6) search toggle + input filtering
  --------------------------- */
searchBtn.addEventListener('click', function(e){
  e.stopPropagation();
  const shown = searchBox.style.display === 'block';
  searchBox.style.display = shown ? 'none' : 'block';
  if(!shown){ searchBox.focus(); searchBox.value = ''; filterByQuery(''); } // reset search when opening
});

function filterByQuery(q){
  const query = (q || '').trim().toLowerCase();
  const items = productsContainer.querySelectorAll('.product');
  items.forEach(item => {
    const hay = (item.dataset.title + ' ' + item.dataset.desc + ' ' + item.dataset.category + ' ' + item.dataset.price).toLowerCase();
    item.style.display = (query === '' || hay.includes(query)) ? '' : 'none';
  });
}

// live search
searchBox.addEventListener('input', function(){
  filterByQuery(this.value);
});

/* ---------------------------
  7) click outside to close menu/search
  --------------------------- */
document.addEventListener('click', function(e){
  // close menu if click outside
  if(menu.style.display === 'block' && !menu.contains(e.target) && e.target !== menubtn){
    menu.style.display = 'none';
    menu.setAttribute('aria-hidden','true');
  }
  // close search if click outside (but ignore clicks on searchBtn)
  if(searchBox.style.display === 'block' && !searchBox.contains(e.target) && e.target !== searchBtn){
    searchBox.style.display = 'none';
  }
});

/* ---------------------------
  8) Add to cart (simple localStorage cart)
  --------------------------- */
let cart = JSON.parse(localStorage.getItem('cart')) || [];

productsContainer.addEventListener('click', function(e){
  if(e.target.matches('.addBtn')){
    const idx = Number(e.target.dataset.index);
    // note: idx is index in displayed[] at render time; safer to read product title
    const title = e.target.parentElement.querySelector('h3').textContent;
    const product = products.find(p => p.title === title);
    if(!product) return;
    const found = cart.find(c => c.title === product.title);
    if(found) found.qty += 1; else cart.push({...product, qty:1});
    localStorage.setItem('cart', JSON.stringify(cart));
    alert(product.title + ' added to cart');
  }
});

/* ---------------------------
  9) helper: keep keyboard accessible, ESC closes things
  --------------------------- */
document.addEventListener('keydown', function(e){
  if(e.key === 'Escape'){
    menu.style.display = 'none';
    searchBox.style.display = 'none';
  }
});


// ÿπÿ±ÿ∂ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™
const container = document.getElementById("products-container");
if (filtered.length > 0) {
  filtered.forEach((p, i) => {
    const div = document.createElement("div");
    div.classList.add("product");
    div.innerHTML = `
      <a href="product.html?id=${p.id}" style="text-decoration:none; color:inherit;">
        <img src="${p.image}" alt="${p.title}">
        <h3>${p.title}</h3>
        <p>${p.description || ""}</p>
        <p>${p.price} EGP</p>
      </a>
    `;
    container.appendChild(div);
  });
} else {
  container.innerHTML = "<p>No products found.</p>";
}


function goToDetails(id){
  window.location.href = `product.html?id=${id}`;
}
</script>
<script>
(function(){
  // ÿßŸÇÿ±ÿ£ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÖŸÜ localStorage
  let raw = localStorage.getItem('products');
  let products = [];
  try { products = raw ? JSON.parse(raw) : []; } catch(e) { products = []; console.error('Invalid products JSON', e); }

  // ŸÜÿ∑ÿ®ÿπ ÿ™ÿ≠ÿ∞Ÿäÿ± ŸÑŸà ŸÖŸÅŸäÿ¥ ŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÜŸáÿßÿ¶ŸäŸãÿß
  const container = document.getElementById('products-container') || document.getElementById('storeContainer');
  if (!container) {
    console.error('Element #products-container or #storeContainer not found in DOM');
    return;
  }

  // ÿ™ÿ£ŸÉÿØ ÿ£ŸÜ ŸÑŸÉŸÑ ŸÖŸÜÿ™ÿ¨ id ŸàŸÖŸàÿ≠ÿØ ÿßÿ≥ŸÖ ÿßŸÑÿ≠ŸÇŸÑ ŸÑŸÑÿµŸàÿ±ÿ© (_img)
  let changed = false;
  products = products.map((p, idx) => {
    const prod = Object.assign({}, p);
    if (!prod.id) { // ŸÑŸà ŸÖŸÅŸäÿ¥ id ŸÜŸàŸÑŸëÿØ Ÿàÿßÿ≠ÿØ ÿ®ÿ≥Ÿäÿ∑
      prod.id = (prod.title ? prod.title.toLowerCase().replace(/\s+/g,'-') : 'p') + '-' + idx + '-' + Date.now();
      changed = true;
    }
    // normalize image property: ŸÜŸÇÿ®ŸÑ image ÿ£Ÿà img ÿ£Ÿà imageData ÿ£Ÿà base64
    prod._img = prod.image || prod.img || prod.imageData || prod.base64 || '';
    // ŸÑŸà ŸÅÿßÿ±ÿ∫ ŸÜÿ≠ÿ∑ ÿ±ÿßÿ®ÿ∑ ÿµŸàÿ±ÿ© ÿ®ÿØŸäŸÑÿ© (ÿ™ŸÇÿØÿ± ÿ™ÿ∫ŸäŸëÿ±Ÿá ŸÑŸÖŸÑŸÅ placeholder ÿπŸÜÿØŸÉ)
    if (!prod._img) prod._img = 'https://picsum.photos/300/200?random=' + (idx+1);
    return prod;
  });
  if (changed) localStorage.setItem('products', JSON.stringify(products));

  // ÿßŸÇÿ±ÿ£ ÿ®ÿßÿ±ÿßŸÖŸäÿ™ÿ± ÿßŸÑŸÉÿßÿ™Ÿäÿ¨Ÿàÿ±Ÿä ŸÑŸà ŸÖŸàÿ¨ŸàÿØ
  const params = new URLSearchParams(location.search);
  const category = params.get('category');

  // ŸÅŸÑÿ™ÿ±ÿ© ÿ®ÿ≥Ÿäÿ∑ÿ©
  const filtered = category 
    ? products.filter(p => (p.category || '').toString().toLowerCase() === category.toLowerCase()) 
    : products;

  // render ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÖÿπ ÿ≤ÿ± "ÿπÿ±ÿ∂ ÿ™ŸÅÿßÿµŸäŸÑ"
  container.innerHTML = '';
  if (!filtered.length) {
    container.innerHTML = '<p style="padding:1rem;color:#666">No products found.</p>';
  } else {
    filtered.forEach((p, i) => {
      const card = document.createElement('div');
      card.className = 'product';
      card.style = card.style || '';
      card.innerHTML = `
        <img src="${p._img}" alt="${escapeHtml(p.title)}" style="width:100%;height:auto;object-fit:cover" onerror="this.src='https://picsum.photos/300/200?random=999'">
        <h3 style="font-size:0.95rem;margin:.4rem 0">${escapeHtml(p.title)}</h3>
        <p style="font-size:0.8rem;color:#555;margin:.2rem 0">${escapeHtml(p.description || '')}</p>
        <div style="font-weight:700;margin:.3rem 0">${p.price} EGP</div>
        <div style="display:flex;gap:.4rem;justify-content:center">
          <button class="addBtn" data-index="${i}" style="padding:.3rem .5rem;background:#000;color:#fff;border:none;border-radius:6px;cursor:pointer">Add to Cart</button>
          <button class="detailsBtn" data-id="${encodeURIComponent(p.id)}" style="padding:.3rem .5rem;background:#444;color:#fff;border:none;border-radius:6px;cursor:pointer">ÿπÿ±ÿ∂ ÿ™ŸÅÿßÿµŸäŸÑ</button>
        </div>
      `;
      container.appendChild(card);
    });
  }

  // ÿ™ÿπÿßŸÖŸÑ ŸÖÿπ ÿßŸÑŸÜŸÇÿ±ÿßÿ™ (delegation) ÿπÿ¥ÿßŸÜ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ± ÿ™ÿπŸÖŸÑ ÿ®ÿØŸàŸÜ ŸÖÿ¥ÿßŸÉŸÑ
  container.addEventListener('click', function(e){
    const t = e.target;
    if (t.classList.contains('detailsBtn')) {
      const id = decodeURIComponent(t.dataset.id);
      // Ÿäÿ±Ÿàÿ≠ ŸÑŸÑÿµŸÅÿ≠ÿ© product.html ŸÖÿπ ÿßŸÑŸÄ id
      window.location.href = `product.html?id=${encodeURIComponent(id)}`;
    } else if (t.classList.contains('addBtn')) {
      const idx = Number(t.dataset.index);
      const product = filtered[idx];
      if (!product) return;
      let cart = JSON.parse(localStorage.getItem('cart') || '[]');
      const found = cart.find(c => c.id === product.id);
      if (found) found.qty = (found.qty || 0) + 1;
      else cart.push({...product, qty:1});
      localStorage.setItem('cart', JSON.stringify(cart));
      alert((product.title || 'Product') + ' added to cart');
    }
  });

  // ÿØŸàÿßŸÑ ŸÖÿ≥ÿßÿπÿØÿ©
  function escapeHtml(s){ return String(s||'').replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }
})();
</script>
  <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyAbsKWjuKx96AsxcIzE5zYvD4TisTOVoPA",
    authDomain: "my-store-d18fc.firebaseapp.com",
    projectId: "my-store-d18fc",
    storageBucket: "my-store-d18fc.firebasestorage.app",
    messagingSenderId: "967321260187",
    appId: "1:967321260187:web:5fb8314d196aec535b363e",
    measurementId: "G-03CYRPWTML"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  </script>
</body>
</html>


<!--
<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Store</title>
  <style>
    body{font-family: Arial, sans-serif;padding:1rem;background:#f6f6f6}
    .products{display:flex;flex-wrap:wrap;gap:12px}
    .product{width:150px;background:#fff;border-radius:8px;padding:8px;border:1px solid #eee;text-align:center}
    .product img{width:100%;height:100px;object-fit:cover;border-radius:6px}
    .product a{color:inherit;text-decoration:none}
    .product h3{font-size:14px;margin:6px 0}
    .product .price{font-weight:700;color:#111}
  </style>
</head>
<body>

  <h2>ÿßŸÑŸÖÿ™ÿ¨ÿ±</h2>
  <div class="products" id="productsContainer"></div>

<script>
/* ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ© ÿ™Ÿèÿ≥ÿ™ÿÆÿØŸÖ ŸÑŸà ŸÖÿß ŸÅŸäÿ¥ data ŸÅŸä localStorage */
const defaultProducts = [
  { id: 'p1', title: 'King Bed', description: 'Large comfortable bed', price: 500, category: 'bedroom', image: 'https://picsum.photos/300/200?random=1' },
  { id: 'p2', title: 'Wardrobe', description: 'Wooden wardrobe', price: 300, category: 'bedroom', image: 'https://picsum.photos/300/200?random=2' },
  { id: 'p3', title: 'Dining Table', description: 'Table for 6', price: 700, category: 'dining', image: 'https://picsum.photos/300/200?random=3' },
  { id: 'p4', title: 'Sofa', description: 'Modern 3-seater', price: 450, category: 'livingroom', image: 'https://picsum.photos/300/200?random=4' }
];

/* ÿ•ÿ∞ÿß ŸÖÿß ŸÖŸàÿ¨ŸàÿØŸäŸÜ ŸÅŸä localStorageÿå ŸÜÿ≠ÿ∑ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä (Ÿäÿ≥ŸáŸëŸÑ ÿπŸÑŸäŸÉ ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ©) */
if(!localStorage.getItem('products')){
  localStorage.setItem('products', JSON.stringify(defaultProducts));
}

/* ŸÜŸÇÿ±ÿ£ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÖŸÜ localStorage */
const products = JSON.parse(localStorage.getItem('products')) || defaultProducts;

const container = document.getElementById('productsContainer');

/* render */
function renderProducts(list){
  container.innerHTML = '';
  list.forEach(p=>{
    // ŸÉŸÑ ŸÉÿßÿ±ÿ™ ŸáŸà ÿ±ÿßÿ®ÿ∑ ÿ•ŸÑŸâ product.html ŸÖÿπ id ŸÉŸÄ query parameter
    const html = `
      <div class="product">
        <a href="product.html?id=${encodeURIComponent(p.id)}">
          <img src="${p.image}" alt="${p.title}">
          <h3>${p.title}</h3>
          <div class="price">${p.price} EGP</div>
        </a>
      </div>
    `;
    container.insertAdjacentHTML('beforeend', html);
  });
}

renderProducts(products);

/* ===== ŸÜÿµÿßÿ¶ÿ≠ ÿ™ÿµÿ≠Ÿäÿ≠ ŸÑŸà ŸÖÿ¥ ŸÅÿ™ÿ≠ ÿßŸÑŸÖŸÜÿ™ÿ¨ =====
1) ÿßŸÅÿ™ÿ≠ DevTools (F12) Ÿàÿ¥ŸäŸÉ Console ŸÑŸà ŸÅŸäŸá ÿ£ÿÆÿ∑ÿßÿ°.
2) ÿ™ÿ£ŸÉÿØ ÿ•ŸÜ ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÑŸÅ product.html ÿ™ŸÖÿßŸÖ (ÿ≠ÿ≥ÿßÿ≥Ÿäÿ© ÿßŸÑÿ≠ÿ±ŸàŸÅ ŸÅŸä ÿ®ÿπÿ∂ ÿßŸÑÿ£ŸÜÿ∏ŸÖÿ©).
3) ÿ¥ŸàŸÅ ŸáŸÑ ÿßŸÑÿ±ÿßÿ®ÿ∑ ÿßŸÑŸÑŸä ÿßÿ™ŸàŸÑÿØ: ÿßÿ∂ÿ∫ÿ∑ ŸäŸÖŸäŸÜ ÿπŸÑŸâ ÿµŸàÿ±ÿ© -> copy link -> ÿßŸÑÿµŸÇŸá ŸÅŸä ŸÖŸÉÿßŸÜ ÿ¨ÿØŸäÿØ Ÿàÿ™ÿ£ŸÉÿØ ÿ•ŸÜŸá Ÿäÿ≠ÿ™ŸàŸä ?id=p1 ÿ£Ÿà ÿ∫Ÿäÿ±Ÿá.
*/
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Store</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 20px;
    }
    h2 { margin-bottom: 20px; }

    .store {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 20px;
    }
    .card {
      background: #fff;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      text-align: center;
      transition: transform .2s;
    }
    .card:hover { transform: translateY(-5px); }
    .card img {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }
    .card h3 {
      margin: 10px 0 5px;
      font-size: 18px;
    }
    .card p {
      font-size: 14px;
      color: #555;
      margin: 0 0 10px;
    }
    .price {
      font-weight: bold;
      margin: 10px 0;
      color: #000;
    }
    .card a {
      display: inline-block;
      margin-bottom: 15px;
      padding: 8px 12px;
      background: #111;
      color: #fff;
      text-decoration: none;
      border-radius: 4px;
      transition: background .2s;
    }
    .card a:hover {
      background: #444;
    }

 
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:Arial, sans-serif;background:#f6f6f6;color:#111}

    /* Nav */
    nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      background:#fff;
      padding:.6rem 1rem;
      box-shadow:0 1px 4px rgba(0,0,0,.1);
      position:sticky;top:0;z-index:50
    }
    .left{display:flex;align-items:center;gap:.75rem}
    #menubtn{border:none;background:#000;color:#fff;font-size:1.2rem;padding:.4rem .7rem;border-radius:6px;cursor:pointer}
    .logo{font-weight:bold;font-size:1.2rem;font-family:'Cormorant', serif}
    .right{display:flex;align-items:center;gap:.6rem}
    #searchBtn{border:none;background:transparent;cursor:pointer;font-size:1.2rem}
    #searchBox{display:none;border:1px solid #ddd;padding:.35rem .5rem;border-radius:6px;min-width:160px}
    #cartBtn img{width:32px;height:32px;object-fit:cover;border-radius:6px}

    /* Menu */
    #menu{
      position:fixed;top:3.5rem;left:1rem;
      display:none;
      background:rgba(0,0,0,.85);
      color:#fff;padding:1rem;border-radius:8px;
    }
    #menu a{
      display:block;color:#fff;text-decoration:none;
      margin:.4rem 0;padding:.4rem;border-radius:6px;
    }
    #menu a:hover{background:#fff;color:#000}

    /* Products */
    main{padding:1rem}
    h2{margin:1rem 0}
    #products-container{
      display:flex;flex-wrap:wrap;gap:.6rem;
      justify-content:flex-start
    }
    .product{
      width:9rem;background:#fff;padding:.5rem;
      border:1px solid #ddd;border-radius:6px;text-align:center
    }
    .product img{width:100%;height:80px;object-fit:cover;border-radius:4px}
    .product h3{font-size:.9rem;margin:.4rem 0}
    .product p{font-size:.75rem;margin:.2rem 0;color:#555}
    .product .price{font-weight:bold;color:#000}
    .addBtn{margin-top:.35rem;background:#000;color:#fff;padding:.3rem .5rem;border:none;border-radius:4px;cursor:pointer}
 



</style>
</head>
<body>
  
  


<script>
  const menubtn = document.getElementById("menubtn");
  const menu = document.getElementById("menu");

  menubtn.addEventListener("click", () => {
    if(menu.style.display === "block") {
      menu.style.display = "none";
    } else {
      menu.style.display = "block";
    }
  });
</script>

  <h2>
Ready
  </h2>
  <div>
    <button id="searchBtn" onclick="toggleSearch()">
    <img src="search.webp" alt="">
    </button>
    <input type="text" placeholder="search" id="searchbox">
    
 
  <a href="Cart.html">
    <img src="shopping.webp" alt="Cart" class="cart"></a></div>
   
</nav>

  <h2>All Products</h2>
  <div class="store" id="storeContainer"></div>

  <script>
    // ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ©
    const defaultProducts = [
      { id: 'p1', title: 'King Bed', description: 'Large comfortable bed', price: 500, category: 'bedroom', image: 'https://picsum.photos/300/200?random=1' },
      { id: 'p2', title: 'Wardrobe', description: 'Wooden wardrobe', price: 300, category: 'bedroom', image: 'https://picsum.photos/300/200?random=2' },
      { id: 'p3', title: 'Dining Table', description: 'Table for 6', price: 700, category: 'dining', image: 'https://picsum.photos/300/200?random=3' },
      { id: 'p4', title: 'Sofa', description: 'Modern 3-seater', price: 450, category: 'livingroom', image: 'https://picsum.photos/300/200?random=4' }
    ];

    // fallback ŸÑŸà localStorage ŸÅÿßÿ∂Ÿä
    if(!localStorage.getItem('products')){
      localStorage.setItem('products', JSON.stringify(defaultProducts));
    }
    const products = JSON.parse(localStorage.getItem('products')) || defaultProducts;

    const container = document.getElementById('storeContainer');

    // render ÿßŸÑŸÉÿ±Ÿàÿ™
    function renderProducts(list){
      container.innerHTML = '';
      list.forEach(p=>{
        const html = `
          <div class="card">
            <img src="${p.image}" alt="${p.title}">
            <h3>${p.title}</h3>
            <p>${p.description}</p>
            <div class="price">${p.price} EGP</div>
            <a href="product.html?id=${encodeURIComponent(p.id)}">View Details</a>
          </div>
        `;
        container.insertAdjacentHTML('beforeend', html);
      });
    }
    renderProducts(products);
  </script>
  
  

</body>
</html>-->
